/*! Awesomstar 0.1.0 | (c) 2017 Pedro RogÃ©rio | MIT License */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Awesomstar=b()}(this,function(){"use strict";var a=function(a){return a?(this.rating=document.querySelectorAll(".rating"),this.stars=document.querySelectorAll(".star"),this.callback=a.callback||function(){},this.endpoint=a.endpoint,this.defaults={},this.endpoint?void this.vote():void console.warn("Awesomstar: Please pass a valid endpoint")):void console.log("%c Missing options","background: red; color: white")};return a.prototype={post:function(a,b,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.onreadystatechange=function(){if(4===this.readyState)if(this.status>=200&&this.status<300||304===this.status){var a=JSON.parse(this.responseText);c.call(this,a)}else d.call(this,this.responseText)},e.send(b),e=null},param:function(a){var b="string"==typeof a?a:Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&");return b},set:function(){Array.prototype.map.call(this.rating,function(a){var b=a.getAttribute("data-rating-val");b&&0!==b&&a.querySelectorAll("input")[b-1].setAttribute("checked","checked")})},vote:function(){this.set(),Array.prototype.map.call(this.stars,function(a){a.addEventListener("click",function(){this.defaults={id:a.parentNode.getAttribute("data-rating-id"),rating:a.getAttribute("value")},a.parentNode.setAttribute("data-rating-val",this.defaults.rating),this.post(this.endpoint,this.param(this.defaults),this.callback,this.fail)}.bind(this),!1)}.bind(this))},fail:function(a){console.log(a)}},a});