/*! Awesomstar 0.0.1 | (c) 2015 Pedro RogÃ©rio | MIT License */
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Awesomstar=b()}(this,function(){"use strict";var a=function(){return this&&this instanceof a?(this.rating=document.querySelectorAll(".rating"),this.stars=document.querySelectorAll(".star"),this.endpoint="../api/rate.php",this.defaults={},void this.vote()):new a};return a.init=function(){return new a},a.prototype={post:function(a,b,c){var d=new XMLHttpRequest;d.open("POST",a,!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),d.onreadystatechange=function(){if(4===this.readyState&&this.status>400)throw new Error(this.status+" - "+this.statusText)},d.send(b),d=null},param:function(a){var b,c="";for(b in a)a.hasOwnProperty(b)&&(c.length>0&&(c+="&"),c+=encodeURI(b+"="+a[b]));return c},each:function(a,b){for(var c=0,d=a.length;d>c;)b(a[c],c),c+=1},set:function(){this.each(this.rating,function(a){var b=a.getAttribute("data-rating-val");b&&0!==b&&a.querySelectorAll("input")[b-1].setAttribute("checked","checked")})},vote:function(){this.set(),this.each(this.stars,function(a){a.addEventListener("click",function(){this.defaults={id:a.parentNode.getAttribute("data-rating-id"),rating:a.getAttribute("value")},a.parentNode.setAttribute("data-rating-val",this.defaults.rating),this.post(this.endpoint,this.param(this.defaults))}.bind(this))}.bind(this))}},a});